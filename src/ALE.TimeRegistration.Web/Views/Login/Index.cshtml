<head>
    <link rel="stylesheet" href="~/css/Login.css" />
    <link rel="stylesheet" href="~/css/site.css" />
</head>
<body class="BackgroundClock">
    <div class="text-center">
        <h1>Time Registration App</h1>
    </div>
    <div id="app">
        <div class="container">
            <div class="d-flex justify-content-center">
                <div class="login">
                    <div class="d-flex justify-content-center form_container">
                        <form v-on:submit="login(user)">
                            <div class="input-group mb-3">
                                <div class="input-group-append">
                                    <span class="input-group-text"><i class="fas fa-user"></i></span>
                                </div>
                                <input type="text" class="form-control input_user" placeholder="e-mail" v-model="user.email">
                                <span class="text-danger"></span>
                            </div>
                            <div class="input-group mb-2">
                                <div class="input-group-append">
                                    <span class="input-group-text"><i class="fas fa-key"></i></span>
                                </div>
                                <input type="password" class="form-control input_pass" placeholder="password" v-model="user.password">
                                <span class="text-danger"></span>
                            </div>
                            <div class="d-flex justify-content-center mt-3 login_container">
                                <button type="submit" name="button" class="btn login_btn">Login</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

@section scripts{
    <script>
        var apiURL = 'https://localhost:5001/api/accounts/login';
        var app = new Vue({
            el: '#app',
            data: {
                token: null,
                user: {email:"", password:""}
            },
            created: function () {
                var self = this;
            },
            methods: {
                login: function (user) {
                    var self = this;
                    axios.post(`${apiURL}`, user)
                        .then(function (response) {
                            self.token = response.data;
                        })
                        .catch(function (error) {
                            console.error(error);
                        });
                }
            }

        });
    </script>
}
