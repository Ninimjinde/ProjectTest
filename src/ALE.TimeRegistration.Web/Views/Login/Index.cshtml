<head>
    <link rel="stylesheet" href="~/css/Login.css" />
    <link rel="stylesheet" href="~/css/site.css" />
</head>
<body class="BackgroundClock">
    <div class="text-center">
        <h1>Time Registration App</h1>
    </div>
    <div id="app">
        <div class="container">
            <div class="d-flex justify-content-center">
                <div class="login">
                    <div class="d-flex justify-content-center form_container">
                        <form>
                            <div class="input-group mb-3">
                                <div class="input-group-append">
                                    <span class="input-group-text"><i class="fas fa-user"></i></span>
                                </div>
                                <input type="text" class="form-control input_user" placeholder="e-mail" v-model="user.email">
                                <span class="text-danger"></span>
                            </div>
                            <div class="input-group mb-2">
                                <div class="input-group-append">
                                    <span class="input-group-text"><i class="fas fa-key"></i></span>
                                </div>
                                <input type="password" class="form-control input_pass" placeholder="password" v-model="user.password">
                                <span class="text-danger"></span>
                            </div>
                            <div class="d-flex justify-content-center mt-3 login_container">
                                <button type="submit" name="button" class="btn login_btn" v-on:click="login(user)">Login</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

@section scripts{
    <script>
        var apiURL = 'https://localhost:5001/api';
        var app = new Vue({
            el: '#app',
            data: {
                user: { email: "", password: "" },
                token: null
            },
            methods: {
                login: function (user) {
                    var self = this;
                    axios.post(`${apiURL}/accounts/login`, self.user)
                        .then((response) => {
                            self.token = response.data;
                            console.log(token);
                        })
                        .catch((error) => {
                            console.log(error);
                        });
                }
            }
        });
    </script>
}
